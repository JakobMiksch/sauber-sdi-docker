/*!
 *
 *   Copyright (c) 1999 - 2011 my-Channels Ltd
 *   Copyright (c) 2012 - 2017 Software AG, Darmstadt, Germany and/or Software AG USA Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors.
 *
 *   Use, reproduction, transfer, publication or disclosure is prohibited except as specifically provided for in your License Agreement with Software AG.
 *
 */
(function(b,c){var a=(function(){var Z={SESSION_START:1,RESOURCE_SUBSCRIBE:2,KEEP_ALIVE:3,BATCH_SUBSCRIBE:5,PACKET_RECEIVE:7,EVENT_RECEIVE:8,SET_RESOURCE_ALIAS:10,RESOURCE_PUBLISH:14,RESOURCE_UNSUBSCRIBE:15,QUEUE_COMMIT:16,QUEUE_ROLLBACK:17,TX_PUBLISH:20,TX_IS_COMMITTED:24,CLIENT_CLOSE:30};var t={START:1,STOP:2,DISCONNECT:3,RECONNECT:4,ERROR:5,DATA:6,DRIVER_CHANGE:7,SUBSCRIBE:8,UNSUBSCRIBE:9,COMMIT:10,ROLLBACK:11,PUBLISH:13};var P={NOTSTARTED:"NOTSTARTED",CONNECTING:"CONNECTING",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",STOPPED:"STOPPED"};var m="_Nirvana_Driver_DOM_Objects_Container";var i={};var K=null;var V=(function(){var aG=9;var aK=false;var ag=(function(){var aR=[];var aX=10000;var aP=false;var aT;var aQ=function(a0){};function aU(a0,a1){if(aG<=a0){var a3=Array.prototype.slice.call(arguments);a3.unshift(new Date());var a2=a3.join(" ");if(aP&&aT&&!aT.closed){aT.document.writeln(a2+"<br/>");}if(aR.length>aX){aR.shift();}aR.push(a2);aQ(a2);}}function aS(a0,a1){var a2="EXCEPTION: "+a1.name+" - "+a1.message;aU(a0,a2);}function aY(a0){aQ=a0;}function aV(a0){if(!a0){a0=b.event;}if((a0.keyCode==68)&&a0.ctrlKey&&a0.altKey){aZ();}}function aZ(){if(!aP||(aT&&aT.closed)){aT=b.open("","Console","width=600,height=300,scrollbars=yes,resizable");aT.document.open();aT.document.writeln("<style> { font-size: 10px; font-family: verdana, lucida sans, courier new, courier, sans-serif ; }</style>");aT.document.writeln("<b>User Agent: "+navigator.userAgent+"</b><br/>");for(var a0=0;a0<aR.length;a0++){aT.document.writeln(aR[a0]+"<br/>");}aP=true;}else{aT.focus();}}try{if(b.addEventListener){b.addEventListener("keydown",aV,false);}else{if(document.attachEvent){document.attachEvent("onkeydown",aV);}else{document.addEventListener("keydown",aV,true);}}}catch(aW){}return{setLogger:aY,log:aU,logException:aS};}());var aC=function(){return aK;};var aJ=function(aP){aG=aP;aK=aG<9;};var am=function(aQ,aP){document.cookie=aQ+"="+encodeURIComponent(aP)+"; expires="+new Date((new Date()).getTime()+365*24*60*60*1000)+"; ";};var ak=function(aS){var aQ=document.cookie.split("; ");for(var aP=0;aP<aQ.length;aP++){var aR=aQ[aP].split("=");if(aR[0]==aS){return decodeURIComponent(aR[1]);}}return null;};var aw=(function(){var aP=500;var aV=0;var aR=0;var aQ={};function aW(aY,aX){var aZ=aR++;aQ[aZ]={t:aV+aX,f:aY};return aZ;}function aT(aY){try{if(aQ[aY]){delete aQ[aY];}}catch(aX){}}function aS(){aV+=aP;aU();setTimeout(aS,aP);}function aU(){for(var aY in aQ){if(aQ.hasOwnProperty(aY)){var aX=aQ[aY];if(aV>=aX.t){(aX.f)();aT(aY);}}}}aS();return{schedule:aW,cancel:aT};}());var av=function(){var aU=[];var aQ=function(aV){if(ac.getNirvanaCookie()!==c){return"&Connection-Type=JR&"+ac.getNirvanaCookie()+"&R="+aV.requestID;}else{return"&R="+aV.requestID;}};var aS=function(aW){var aV="";if(aW.hasTag()){aV=aV+"&T="+V.base64Encode(aW.getTag());}if(aW.hasData()){aV=aV+"&D="+aW.getData(a.BYTE_ARRAY_AS_BASE64_STRING);}if(aW.hasDictionary()){aV=aV+"&J="+aT(aW.getDictionary());}aV=aV+"&L="+aW.getTTL()+aR(aW.getEventAttributes());return aV;};var aT=function(a1){var a3=a1.getKeys();var a4=a3.length;var aX="";for(var aY=0;aY<a4;aY++){if(aY>0){aX+=",";}var a2=a3[aY];var aZ=a1.getType(a2);aX+=encodeURIComponent(a2)+","+aZ;if(aZ===k.ARRAY){aZ=a1.getArrayType(a2);var aV=a1.get(a2,a.LongType.LONG_AS_DECIMAL_STRING);if(aZ===k.STRING||aZ===k.CHARACTER){var aW=[];for(var a0=0;a0<aV.length;a0++){aW[a0]=encodeURIComponent(aV[a0]);}aV=aW;}aX+=","+aZ+","+aV.length+","+aV.join(",");}else{if(aZ===k.DICTIONARY){aX+=","+aT(a1.get(a2));}else{if(aZ===k.STRING||aZ===k.CHARACTER){aX+=","+encodeURIComponent(a1.get(a2));}else{aX+=","+a1.get(a2,a.LongType.LONG_AS_DECIMAL_STRING);}}}}return aX;};var aR=function(aY){var a5=0;var aX=[];var aZ=h.HEADER_KEYS;var a4=aZ.length;for(var a2=0;a2<a4;a2++){var aV=aY.getAttribute(aZ[a2]);if(aV||aV===0){a5=a5+(1<<a2);aX.push(encodeURIComponent(aV));}}if(aY.getMessageType()>-1&&aY.getMessageType()<7){var aW=h.JMS_HEADER_KEYS;var a0=aW.length;for(var a3=0;a3<a0;a3++){var a1=aY.getAttribute(aW[a3]);if(a1||a1===0){a5=a5+(1<<(a4+a3));aX.push(encodeURIComponent(a1));}}}if(a5>0){return"&K="+a5+"&H="+aX.join(",");}return"";};aU[Z.SESSION_START]=function(aW){var aV=aW.session;return["F="+Z.SESSION_START+"&Connection-Type=JC&Y=10&V="+navigator.appName.replace(" ","-")+"&P="+ac.Drivers.WireProtocol[ac.getCurrentDriver()]+"&W="+a.BUILD_NUMBER.replace(" ","-")+"&X="+a.BUILD_DATE.replace(" ","-")+"&Z="+navigator.platform.toString().replace(" ","_")+"&S="+encodeURIComponent(aV.getUsername())+"&A="+encodeURIComponent(aV.getConfig().applicationName)+"&G="+(aV.getConfig().serverLogging?"T":"F")+"&D="+(aV.isDataStreamEnabled()?"T":"F")+"&B="+(aV.getDataStreamID())+"&R="+aW.requestID+"&1Date="+new Date().getTime(),""];};aU[Z.CLIENT_CLOSE]=function(aV){return["F="+Z.CLIENT_CLOSE+aQ(aV),""];};aU[Z.KEEP_ALIVE]=function(aV){return["F="+Z.KEEP_ALIVE+aQ(aV),""];};aU[Z.BATCH_SUBSCRIBE]=function(a2){var a1="";var a0=a2.resources;var aV=a0.length;for(var aX=0;aX<aV;aX++){var aZ=a0[aX];var aY=aZ.getResourceType();if(aX>0){a1+=",";}a1+=aZ.getName();if(aY===a.CHANNEL_RESOURCE){var aW;if(aZ.getCurrentEID()>=0){aW=aZ.getCurrentEID()+1;}else{aW=aZ.getStartEID();}a1+=","+aW;a1+=","+encodeURIComponent(aZ.getFilter());a1+=",F";}else{if(aY===a.QUEUE_RESOURCE){a1+=",0";a1+=","+encodeURIComponent(aZ.getFilter());a1+=",T";}else{if(aY===a.TRANSACTIONAL_QUEUE_RESOURCE){a1+=","+aZ.getWindowSize();a1+=","+encodeURIComponent(aZ.getFilter());a1+=",T";}else{a1+=",0";a1+=","+encodeURIComponent(aZ.getFilter());a1+=",F";}}}}return["F="+Z.BATCH_SUBSCRIBE+aQ(a2),"E="+aV+"&N="+a1];};aU[Z.RESOURCE_SUBSCRIBE]=function(aV){aV.resources=[aV.resource];return aU[Z.BATCH_SUBSCRIBE](aV);};aU[Z.RESOURCE_PUBLISH]=function(aX){var aW=aX.resource;var aV=aX.event;return["F="+Z.RESOURCE_PUBLISH+aQ(aX),"N="+aW.getName()+aS(aV)];};aU[Z.RESOURCE_UNSUBSCRIBE]=function(aY){var aX=aY.resource;var aW=aX.getResourceType();var aV=["F="+Z.RESOURCE_UNSUBSCRIBE+aQ(aY),"N="+aX.getName()];if(aW===a.QUEUE_RESOURCE||aW===a.TRANSACTIONAL_QUEUE_RESOURCE){aV[1]=aV[1]+"&Q=T";}return aV;};aU[Z.QUEUE_COMMIT]=function(aX){var aW=aX.resource;var aV=aX.event;return["F="+Z.QUEUE_COMMIT+aQ(aX),"N="+aW.getName()+"&E="+aV.getEID()];};aU[Z.QUEUE_ROLLBACK]=function(aX){var aW=aX.resource;var aV=aX.event;return["F="+Z.QUEUE_ROLLBACK+aQ(aX),"N="+aW.getName()+"&E="+aV.getEID()];};aU[Z.TX_PUBLISH]=function(aY){var aW=aY.resource;var aX=aY.transaction;var aV=aY.event;return["F="+Z.TX_PUBLISH+aQ(aY),"N="+aW.getName()+"&X="+aX.getTxID()+aS(aV)];};aU[Z.TX_IS_COMMITTED]=function(aW){var aV=aW.transaction;return["F="+Z.TX_IS_COMMITTED+aQ(aW),"X="+aV.getTxID()];};var aP=function(aV){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Request Factory] Building Request from Command "+ab(aV.requestType));}return(aU[aV.requestType](aV));};return{buildRequest:aP};};var aH=function(aT){var aS=[];var aR=false;var aP=function(aY,aZ,aX){var a0;if(aY.Dictionary){a0=aU(aY.Dictionary);}var aW=new h(aY.h);var aV;if(aY.Tag){aV=V.base64Decode(aY.Tag);}return new U(aT,aY.EID,aZ,aX,aW,aY.Data,aV,a0);};var aU=function(aZ){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Building Event Dictionary ",aZ);}for(var a2 in aZ){if(aZ.hasOwnProperty(a2)){var a1=aZ[a2];if(a1[0]===k.STRING||a1[0]===k.CHARACTER){a1[1]=decodeURIComponent(a1[1]);}else{if(a1[0]===k.DICTIONARY){a1[1]=aU(a1[1]);}else{if(a1[0]===k.ARRAY){if(a1[1]===k.STRING||a1[1]===k.CHARACTER){var a3=a1[2];var aY=a3.length;for(var aX=0;aX<aY;aX++){a3[aX]=decodeURIComponent(a3[aX]);}}else{if(a1[1]===k.DICTIONARY){var a0=a1[2];var aV=a0.length;for(var aW=0;aW<aV;aW++){a0[aW]=aU(a0[aW]);}}}}}}}}return new k(aZ,true);};aS[Z.SESSION_START]=function(aV,aW){if(V.isLoggingEnabled()){V.Logger.log(6,"[HTTP Response Factory] Received Session Start Response for Command "+aW.requestType,aV,aW);}if(aV[1]){aT.setSessionID(aV[2]);aT.setDataStreamID(aV[3]);ac.onConnect(aV[4]);r.setReady(true);if(aW.reconnect){aT.notifyListeners(t.RECONNECT,aT,aV[3]);}else{aT.notifyListeners(t.START,aT,aV[3]);}}else{if(V.isLoggingEnabled()){V.Logger.log(6,"[HTTP Response Factory] Session Connection Error: "+aV[2]);}aT.notifyListeners(t.ERROR,aT,{name:"SessionConnectException",message:aV[2]});}};aS[Z.BATCH_SUBSCRIBE]=function(aY,aX){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Received Batch Subscribe Callback for Command "+aX.requestType,aY,aX);}var aV=aX.resources;var a3=aY.slice(1);var aZ=aX.resubscribe;var a2=aV.length;for(var a0=0;a0<a2;a0++){var aW=aV[a0];var a6=a3[a0];var a5=a6[1];aW.setSubscribed(a5);if(a5){aW.setAlias(a6[2]);if(!aZ){aW.notifyListeners(a.Observe.SUBSCRIBE,aW,"OK");}}else{var a1=a6[2];var a4;if(a1){if(a1.indexOf("SECURITY")!==-1){a4=new n(a1);}else{if(a1.indexOf("Channel Not Found")!==-1){a4=new p(aW.getName(),a1);}else{a4=new x(a1);}}}if(!a4){a4=new x("Unknown Error Occurred");}aW.notifyListeners(a.Observe.ERROR,aW,a4);}}};aS[Z.KEEP_ALIVE]=function(aV,aW){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Processing KA Response "+aV.toString());}};aS[Z.RESOURCE_PUBLISH]=function(aV,a0){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Received Publish Callback for Command "+a0.requestType,aV,a0);}var aX=a0.resource;var aZ=aV[1];if(aZ){aX.notifyListeners(t.PUBLISH,aX,aZ);}else{var aY=aV[2];var aW;if(aY&&aY.indexOf("SECURITY")!==-1){aW=new n(aY);}else{aW=new x(aY);}aX.notifyListeners(t.ERROR,aX,aW);}};aS[Z.RESOURCE_UNSUBSCRIBE]=function(aV,aX){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Received Resource unsubscribe Callback for Command "+aX.requestType);}var aW=aX.resource;aW.setSubscribed(false);aW.notifyListeners(t.UNSUBSCRIBE,aW,"OK");};aS[Z.PACKET_RECEIVE]=function(aV){if(aT.getLongPollRequestID()<aV[1]){aT.setLongPollRequestID(aV[1]);}else{ac.onError("Data received out of order, reset required. Expected packet "+(aT.getLongPollRequestID()+1)+" but received "+aV[1]);}};aS[Z.EVENT_RECEIVE]=function(a1){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Received Event",a1);}var aY=a1[1];var aV=aY.dg==="1";var a0;var aX;var aW;if(!aV){a0=aT.getResourceByAlias(aY.CNAME);if(!a0){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Event was for non-existent resource: "+aY.CNAME);}return;}aX=a0.getResourceType();aW=a0.getName();}else{a0=aT;aX=-1;aW=aT.getGroupName(aY.CNAME);}var aZ=aP(aY,a0,aW);if(a0){if(aX===a.CHANNEL_RESOURCE){a0.setCurrentEID(aZ.getEID());}a0.notifyListeners(t.DATA,aZ);}};aS[Z.SET_RESOURCE_ALIAS]=function(aY){var aX=aY[1];var aV=aY[2];var aW=aY[3];if(aX=="3"){aT.setGroupAlias(aV,aW);}else{aT.setResourceAlias(aV,aW);}};aS[Z.QUEUE_COMMIT]=function(aV,aX){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Received Queue Commit Response",aV,aX);}var aW=aX.resource;aW.notifyListeners(t.COMMIT,aW,aV[1]);};aS[Z.QUEUE_ROLLBACK]=function(aV,aX){if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Received Queue Rollback Response",aV,aX);}var aW=aX.resource;aW.notifyListeners(t.ROLLBACK,aW,aV[1]);};aS[Z.TX_PUBLISH]=function(aW,aY){var aV=aW[1];var aX=aY.transaction;if(aV){aX.notifyListeners(t.COMMIT,aX,true);aX.setIsCommitted(true);}else{aX.notifyListeners(t.COMMIT,aX,false);aX.notifyListeners(t.ERROR,aX,aW[2]);aX.setIsCommitted(false);}};aS[Z.TX_IS_COMMITTED]=function(aV,aX){var aW=aX.transaction;aW.notifyListeners(t.COMMIT,aW,aV[1]);aW.setIsCommitted(true);};aS[Z.CLIENT_CLOSE]=function(aV,aW){if(aW.clientRequest){if(V.isLoggingEnabled()){V.Logger.log(6,"[HTTP Response Factory] Received Client Close Session Response "+ab(aV[0])+" for command "+ab(aW));}ac.stop();aT.notifyListeners(t.STOP,aT,true);}else{if(V.isLoggingEnabled()){V.Logger.log(4,"[HTTP Response Factory] Received Internal Close Session Response "+ab(aV[0])+" for command "+ab(aW));}ac.onError("Internal close session processed for driver reset");}};function aQ(aW){var aX=aW.d;if(V.isLoggingEnabled()){V.Logger.log(3,"[HTTP Response Factory] Dispatching response "+ab(aX[0]));}var aV=aX[0];if(aV==Z.SESSION_START){aR=false;}if(!aR&&aV!==Z.SESSION_START){aR=true;ac.setPreferredDriver();}if(aV===Z.EVENT_RECEIVE||aV===Z.PACKET_RECEIVE||aV===Z.SET_RESOURCE_ALIAS){aS[aV](aX);}else{var aY=r.dequeueCommand(aW.r);if(aY===null&&aV!==Z.KEEP_ALIVE){if(V.isLoggingEnabled()){V.Logger.log(6,"[HTTP Response Factory] Command is null");}return false;}aS[aV](aX,aY);if(aY!==null&&aV!==Z.SESSION_START){return true;}}return false;}return{dispatchResponse:aQ};};function ah(aT,aR,aP,aQ,aS){this.session=aT;this.proxyWin=null;this.initialized=false;this.initCallback=aQ;this.proxyRealm=aP;this.proxyID=aR+"_"+new Date().getTime();this.proxyURL=aP+aT.getConfig().crossDomainPath+"/crossDomainProxy.html";this.proxyIFrame=al(this.proxyURL+"?proxyID="+this.proxyID+"&sessionID="+V.generateUniqueID()+"&validOrigins="+encodeURIComponent(aT.getConfig().currentDomain+","+aT.getConfig().realms.join(",")),aS);this.readyState=0;this.responseText="";this.status=0;aB.collection[this.proxyID]=this;}ah.prototype.proxyRequest=function(aS,aP){if(this.proxyWin===null){this.proxyWin=this.proxyIFrame.contentWindow;}var aR=[this.proxyID,aS];for(var aQ=0;aQ<aP.length;aQ++){aR.push(aP[aQ]);}this.proxyWin.postMessage(JSON.stringify(aR),this.proxyRealm);};ah.prototype.open=function(aR,aP,aQ){this.proxyRequest("open",arguments);};ah.prototype.send=function(){this.proxyRequest("send",arguments);};ah.prototype.setRequestHeader=function(){this.proxyRequest("setRequestHeader",arguments);};ah.prototype.abort=function(){this.proxyRequest("abort",arguments);};ah.prototype.destroy=function(){this.proxyIFrame.src=this.proxyURL+"?expired="+new Date().getTime();delete aB.collection[this.proxyID];aB.collection[this.proxyID]=null;this.proxyIFrame=null;this.responseText=null;};function ax(){this.id=V.generateUniqueID();var aP="container"+this.id;var aR=document.createElement("div");aR.style.display="none";aR.setAttribute("id",aP);document.getElementById(m).appendChild(aR);var aQ=navigator.appName=="Microsoft Internet Explorer";if(V.isLoggingEnabled()){V.Logger.log(2,"[FormSubmitter] Creating new FormSubmitter: "+this.id);}this.send=function(aS,aX){if(V.isLoggingEnabled()){V.Logger.log(2,"[FormSubmitter] Sending "+aS+"?"+aX[0]+"&"+aX[1]);}ao(aR,aQ);var aU=document.createElement("form");aU.style.display="none";aU.style.position="absolute";aU.method="POST";aU.enctype="application/x-www-form-urlencoded";aU.acceptCharset="UTF-8";aR.appendChild(aU);var aV;try{aV=document.createElement('<iframe name="'+this.id+'">');}catch(a2){aV=document.createElement("iframe");aV.name=this.id;}aV.id=this.id;aV.style.display="none";aU.appendChild(aV);aU.target=this.id;aU.action=aS+"?"+aX[0];try{var aZ=aX[1].split("&");for(var aY=0;aY<aZ.length;aY++){var a1=aZ[aY].indexOf("=");if(a1>-1){var a3=aZ[aY].substring(0,a1);var aW=aZ[aY].substring(a1+1,aZ[aY].length);var aT=document.createElement("textarea");aT.name=a3;aT.value=aW;aU.appendChild(aT);}}}catch(a0){if(V.isLoggingEnabled()){V.Logger.log(2,"[FormSubmitter] Exception: "+a0.message);}}aU.submit();};this.destroy=function(){ao(aR,aQ);document.getElementById(m).removeChild(aR);};}function aE(aR){this.id=V.generateUniqueID();if(V.isLoggingEnabled()){V.Logger.log(2,"[JSONP_Poller] Creating new longpoller: "+this.id);}var aP="container"+this.id;var aV=0;var aU=document.createElement("div");aU.style.display="none";aU.setAttribute("id",aP);var aQ=document.createElement("link");aQ.setAttribute("rel","shortcut icon");aQ.setAttribute("href","about:blank");aU.appendChild(aQ);document.getElementById(m).appendChild(aU);var aT=false;var aS=navigator.appName=="Microsoft Internet Explorer";this.send=function(aX,a0){var aZ=aX+"?"+a0[0]+"&"+a0[1];if(V.isLoggingEnabled()){V.Logger.log(2,"[JSONP_Poller] Sending "+aZ);}try{if(aT){ao(aU,aS);}else{aT=true;}var aW=document.createElement("script");aW.type="text/javascript";aW.src=aZ;aW.onerror=aR;aU.appendChild(aW);aV=0;}catch(aY){if(aV++==5){aR("[JSONP_Poller] Exception: "+aY.message);}}};this.destroy=function(){ao(aU,aS);document.getElementById(m).removeChild(aU);};}function ao(aR,aQ){if(aQ){while(aR.hasChildNodes()){aR.removeChild(aR.lastChild);}}else{while(aR.hasChildNodes()){var aP=aR.removeChild(aR.lastChild);for(var aS in aP){delete aP[aS];}}}}function an(aR){if(V.isLoggingEnabled()){V.Logger.log(2,"[initXMLHTTP] for "+aR);}var aS=false;if(typeof b.XMLHttpRequest!="undefined"&&b.XMLHttpRequest){try{aS=new XMLHttpRequest();if(V.isLoggingEnabled()){V.Logger.log(2,"initXMLHTTP : Constructed XMLHttpRequest for ["+aR+"]");}return aS;}catch(aU){if(V.isLoggingEnabled()){V.Logger.log(2,"initXMLHTTP : Error constructing XMLHttpRequest for ["+aR+"]. error="+aU.message);}aS=false;}}else{if(typeof b.ActiveXObject!="undefined"&&b.ActiveXObject){var aQ=["MSXML2.XMLHttp","Microsoft.XMLHttp","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0"];for(var aP=0;aP<aQ.length;aP++){try{aS=new ActiveXObject(aQ[aP]);if(V.isLoggingEnabled()){V.Logger.log(2,"initXMLHTTP : Constructed ActiveXObject XMLHttpRequest using ["+aQ[aP]+"] for ["+aR+"]");}return aS;}catch(aT){if(V.isLoggingEnabled()){V.Logger.log(2,"initXMLHTTP : Error constructing ActiveXObject XMLHttpRequest :"+aQ[aP]+" for ["+aR+"]. error="+aT.message);}aS=false;}}}else{if(V.isLoggingEnabled()){V.Logger.log(2,"initXMLHTTP : Failed to construct xmlHTTP object for ["+aR+"]");}aS=false;}}return aS;}b.addEventListener("message",function(aT){if(!aI(aT.data)){if(V.isLoggingEnabled()){V.Logger.log(0,"Window received message event that is not intended as cross domain proxy communication.");}return;}if(!ar(af(aT.origin))){i[b.Nirvana].notifyListeners(a.Observe.ERROR,null,new d("CrossDomainProxy","PostMessage Event Origin "+aT.origin+" does not equal any proxied realm origin "+aM()));return;}var aP=JSON.parse(aT.data);var aQ=aP[0];var aS=aP[2];var aR=aB.collection[aQ];if(aS=="init"&&aR){aR.initialized=true;aR.initCallback("initialized");}if(aS=="change"){if(aR.onreadystatechange){aR.responseText=aP[3];aR.readyState=aP[4];aR.status=aP[5];aR.onreadystatechange();}}if(aS=="iframe"){ac.c(JSON.parse(aP[3]));}if(aS=="iFrame_close"){ac.onError(aS);}if(aS=="sse"){ac.c(JSON.parse(aP[3]));}},false);var aB={counter:0,collection:{}};function ar(aP){aP=aP.toUpperCase();for(var aQ in aB.collection){if(aB.collection.hasOwnProperty(aQ)){if(aB.collection[aQ]){if(af(aB.collection[aQ].proxyRealm).toUpperCase()==aP){return true;}}}}return false;}function aI(aR){var aQ=JSON.parse(aR);if(aQ.length>0){var aP=aQ[0];if((aP.indexOf("EVENTSOURCE_STREAMING_POSTMESSAGE")!=-1)||(aP.indexOf("XHR_LONGPOLL_POSTMESSAGE")!=-1)||(aP.indexOf("IFRAME_STREAMING_POSTMESSAGE")!=-1)){return true;}}return false;}function aM(){var aQ=[];for(var aP in aB.collection){if(aB.collection.hasOwnProperty(aP)){if(aB.collection[aP]){aQ.push(af(aB.collection[aP].proxyRealm));}}}return aQ.join(",");}function al(aP,aR){var aS=document.createElement("iframe");aS.id="iframe"+new Date().getTime();aS.src=aP;aS.style.display="none";aS.style.position="absolute";aS.onerror=aR;try{document.getElementById(m).appendChild(aS);}catch(aQ){aR("IFrame Exception: "+aQ.message);}return aS;}function ae(aT,aR,aV){var aQ;if(document.createElement){var aU=document.getElementById("NVLSubFrame");if(aU){aU.setAttribute("src",aT);aQ=aU;}else{if(V.isLoggingEnabled()){V.Logger.log(2,"Iframe does not exist, so creating new one");}var aP='<iframe id="NVLSubFrame"';aP+=" onload=\"window.parent.errorCB('iframe_connection_closed',";aP+=b.ActiveXObject?true:false;aP+=')"';aP+=' src="'+aT+'" style="';aP+="border:1px;";aP+="width:0px;";aP+="height:0px;";aP+='"></iframe>';if(b.ActiveXObject){this.htmlfile=new ActiveXObject("htmlfile");this.htmlfile.open();this.htmlfile.write("<html></html>");this.htmlfile.close();this.htmlfile.parentWindow.onMessage=aR;this.htmlfile.parentWindow.errorCB=aV;var aS=this.htmlfile.createElement("div");this.htmlfile.body.appendChild(aS);aS.innerHTML+=aP;aQ=this.htmlfile;}else{document.getElementById(m).innerHTML+=aP;aQ={};aQ.document={};aQ.document.location={};aQ.document.location.iframe=document.getElementById("NVLSubFrame");aQ.document.location.replace=function(aW){this.iframe.src=aW;};}}}return aQ;}var ad;var aL=function(aU,aS){var aR="";var a2,a0,aY,a1,aZ,aX,aV;var aT=0;var aQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var aW=function(a4){var a3="";if(a4<128){a3+=String.fromCharCode(a4);}else{if((a4>127)&&(a4<2048)){a3+=String.fromCharCode((a4>>6)|192);a3+=String.fromCharCode((a4&63)|128);}else{a3+=String.fromCharCode((a4>>12)|224);a3+=String.fromCharCode(((a4>>6)&63)|128);a3+=String.fromCharCode((a4&63)|128);}}return a3;};var aP=function(a4){var a3="";a4=a4.replace(/\r\n/g,"\n");for(var a6=0;a6<a4.length;a6++){var a5=a4.charCodeAt(a6);a3+=aW(a5);}return a3;};if(!aS){aU=aP(aU);}while(aT<aU.length){if(aS){a2=aU[aT++];a0=aU[aT++];aY=aU[aT++];}else{a2=aU.charCodeAt(aT++);a0=aU.charCodeAt(aT++);aY=aU.charCodeAt(aT++);}a1=a2>>2;aZ=((a2&3)<<4)|(a0>>4);aX=((a0&15)<<2)|(aY>>6);aV=aY&63;if(aT-2===aU.length||isNaN(a0)){aX=aV=64;}else{if(aT-1===aU.length||isNaN(aY)){aV=64;}}aR=aR+aQ.charAt(a1)+aQ.charAt(aZ)+aQ.charAt(aX)+aQ.charAt(aV);}return aR;};if(typeof btoa==="undefined"){ad=aL;}else{ad=function(aQ,aP){if(aP){return aL(aQ,aP);}else{return btoa(aQ);}};}var aN;var aF=function(aV,aQ){var aS="";var a2,a0,aY;var a1,aZ,aX,aW;var aT=0;var aR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var aU=function(a3){var a5="";var a7=0;var a6=0;var a4=0;var a8=0;while(a7<a3.length){a8=a3.charCodeAt(a7);if(a8<128){a5+=String.fromCharCode(a8);a7++;}else{if((a8>191)&&(a8<224)){a6=a3.charCodeAt(a7+1);a5+=String.fromCharCode(((a8&31)<<6)|(a6&63));a7+=2;}else{a6=a3.charCodeAt(a7+1);a4=a3.charCodeAt(a7+2);a5+=String.fromCharCode(((a8&15)<<12)|((a6&63)<<6)|(a4&63));a7+=3;}}}return a5;};aV=aV.replace(/[^A-Za-z0-9\+\/=]/g,"");var aP=[];while(aT<aV.length){a1=aR.indexOf(aV.charAt(aT++));aZ=aR.indexOf(aV.charAt(aT++));aX=aR.indexOf(aV.charAt(aT++));aW=aR.indexOf(aV.charAt(aT++));a2=(a1<<2)|(aZ>>4);a0=((aZ&15)<<4)|(aX>>2);aY=((aX&3)<<6)|aW;aS=aS+String.fromCharCode(a2);if(aQ){aP.push(a2);}if(aX!=64){aS=aS+String.fromCharCode(a0);if(aQ){aP.push(a0);}}if(aW!=64){aS=aS+String.fromCharCode(aY);if(aQ){aP.push(aY);}}}if(aQ){return aP;}else{return aU(aS);}};if(typeof atob==="undefined"){aN=aF;}else{aN=function(aQ,aP){if(aP){return aF(aQ,aP);}else{return atob(aQ);}};}var aq=0;function az(){return aq++;}function aA(){var aP=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1);};return(aP()+aP()+"-"+aP()+"-"+aP()+"-"+aP()+"-"+aP()+aP()+aP());}function at(aP){if(aP.match(/https?:\/\/[^\/]+/)){return aP.match(/https?:\/\/[^\/]+/)[0];}else{return aP;}}function ai(aP){return aP.match(/^([a-z]+):\/\//)[0];}function af(aP){aP=at(aP);if(!aP.match(/:[0-9]+$/)){if(aP.match(/^https:/)){aP+=":443";}else{aP+=":80";}}return aP;}function au(aP){aP=aP.replace(/[^A-Za-z0-9\/_\-#]+/gi,"");if(aP.match(/^[^\/].*?\//)){aP="/"+aP;}return aP;}var ap=4294967296;function aj(aU,aQ){if(aQ&&Array.isArray(aQ)){if(aU==a.LongType.LONG_AS_ARRAY){return aQ;}var aP=false;var aT=aQ[0];var aR=aQ[1];if(aT-2147483647>0){aT-=2147483648;aP=true;}if(aU==a.LongType.LONG_AS_DECIMAL_STRING){return aO(aT,aR,aP);}else{if(aU==a.LongType.LONG_AS_HEXADECIMAL_STRING){return ay(aT,aR,aP);}else{var aS=aT*ap+aR;if(aP){aS=-aS;}return aS;}}}else{return aQ;}}function ay(aR,aQ,aP){var aS=aQ.toString(16);if(aR!==0){while(aS.length<8){aS="0"+aS;}aS=aR.toString(16)+aS;}if(aP){aS="-"+aS;}return aS;}function aO(aW,aU,aS){if(aW<0){return"-9223372036854775808";}var aV="";var aX,aY,aP,aR,aT,aQ;aT=aU&65535;aR=(aU>>16)&65535;if(aW<0){aW=-aW;}aP=(aW)&65535;aY=(aW>>16)&65535;aT=656*aY+7296*aP+5536*aR+aT;aQ=parseInt(aT/10000,10);aT=aT%10000;aR=aQ+7671*aY+9496*aP+6*aR;aQ=parseInt(aR/10000,10);aR=aR%10000;aP=aQ+4749*aY+42*aP;aQ=parseInt(aP/10000,10);aP=aP%10000;aY=aQ+281*aY;aQ=parseInt(aY/10000,10);aY=aY%10000;aX=aQ;if(aX!==0){aV+=aX.toString();}if(aV.length!==0){aV+=aD(aY);}else{if(aY!==0){aV+=aY.toString();}}if(aV.length!==0){aV+=aD(aP);}else{if(aP!==0){aV+=aP.toString();}}if(aV.length!==0){aV+=aD(aR);}else{if(aR!==0){aV+=aR.toString();}}if(aV.length!==0){aV+=aD(aT);}else{aV+=aT.toString();}if(aS){aV="-"+aV;}return aV;}function aD(aQ){var aP=""+aQ;while(aP.length<4){aP="0"+aP;}return aP;}return{Logger:ag,Scheduler:aw,isLoggingEnabled:aC,setDebugLevel:aJ,HTTPRequestFactory:av,HTTPResponseFactory:aH,createIFrame:al,createForeverIFrame:ae,initXMLHTTP:an,base64Encode:ad,base64Decode:aN,getCookie:ak,setCookie:am,getCanonicalResourceName:au,getCanonicalOrigin:af,getUrlProtocol:ai,generateTransactionID:az,generateUniqueID:aA,CrossDomainProxy:ah,FormSubmitter:ax,JSONP_Poller:aE,convertLongFromServer:aj};}());var ac=(function(){var ax;var az=false;var at=null;var aC=0;var aP;var aq=null;var aY;var ae;var al=false;var aB=0;var ak=0;var a0=0;var aN=0;var a3=0;var aK=1000;var af=3;var aR=(Math.floor(Math.random()*30)+30)*1000;var aV=60000;var aQ;function ao(a5,a9,a7){if(a7&&aW.length){return;}if(typeof a5=="undefined"){aW=ag;}else{var a6=[];for(var ba=0;ba<a5.length;ba++){var bb=a5[ba];if(typeof a.Driver[bb]!="undefined"){a6.push(bb);}else{i[b.Nirvana].notifyListeners(a.Observe.ERROR,aY,new I(bb));}}if(a6.length){aW=a6;}else{aW=ag;}}if(a9){aW=aT(aW);}a0=0;if(aY.getConfig().rememberDriver){var a8=V.getCookie("NirvanaDriver");if(a8!==null){for(var a4=0;a4<aW.length;a4++){if(aW[a4]==a8){a0=a4;}}}}aY.notifyListeners(a.Observe.DRIVER_CHANGE,aY,aW[a0]);}function a2(){var a4=ac.getCurrentDriver();aW=[a4];a0=0;if(V.isLoggingEnabled()){V.Logger.log(7,"[Transport] Settled on preferred driver: "+a4);}if(av().rememberDriver){if(V.getCookie("NirvanaDriver")===null){V.setCookie("NirvanaDriver",a4);}}}function ap(){if(V.isLoggingEnabled()){V.Logger.log(4,"[Transport] Remaining drivers: "+aW.join());}if(aW.length>1){a0=(a0+1)%aW.length;if(a0>0||ae.realms.length===1){aY.notifyListeners(a.Observe.DRIVER_CHANGE,aY,aW[a0]);}ak=0;}if(a0===0){a1();}}function a1(){var a4=(aN+1)%ae.realms.length;if(aN!=a4){if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Moving to another realm: "+ae.realms[a4]);}aN=a4;aY.notifyListeners(a.Observe.REALM_CHANGE,aY,ae.realms[aN]);ak=0;ao(aY.getConfig().drivers,ae.applyUserAgentHeuristics,false);}}function an(){if(aW.length){var a4=aL.createDriver(aW[a0]);if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Attempting to use Driver: "+a4.name);}if(!a4.isClientSupported()){if(V.isLoggingEnabled()){V.Logger.log(7,"[Transport] Driver not supported: "+a4.name);}aW.splice(a0,1);if(aW.length<=a0){a0=0;}aY.notifyListeners(a.Observe.DRIVER_CHANGE,aY,aW[a0]);return an();}else{return a4;}}else{return null;}}function aw(a4){return aL.createDriver(a4).isClientSupported();}function aT(a5){function a4(a8){var a7=a5.indexOf(a8);if(a7>-1){a5.splice(a7,1);}}function a6(){var a7=navigator.userAgent.toLowerCase();return(a7.indexOf("msie")!=-1)?parseInt(a7.split("msie")[1],10):false;}if(a6()==9){a4(aL.Names.JSONP_LONGPOLL);}return a5;}function aO(a5,a4){if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Setting Up");}aY=a5;ae=a5.getConfig();ao(ae.drivers,ae.applyUserAgentHeuristics,a4);}function aE(){if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Opening Driver to "+ae.realms[aN]);}aY.setLongPollRequestID(-1);aP=ac.initializeDriver();if(aP!==null){ad("driver.open",ae.openDriverTimeout);aP.open();}else{var a4=new F(ae.drivers);aY.notifyListeners(a.Observe.ERROR,aY,a4);i[b.Nirvana].notifyListeners(a.Observe.ERROR,aY,a4);}}function au(){al=false;if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Tearing Down Driver");}if(aP!==null){r.setReady(false);clearTimeout(ax);aU();aP.close();aP=null;if(aY.getStatus()===P.CONNECTED){aY.notifyListeners(a.Observe.DISCONNECT,aY,"Session Disconnected");}}}function aZ(){return aW[a0];}function aX(){return ae.realms[aN];}function aS(){return aY;}function av(){return ae;}function aD(){aC++;return aC;}function aA(){au();aC=0;}function am(){return aq;}function ar(a4){aq=a4;ak=0;aB=0;a3=new Date();al=true;}function aJ(){return al;}function aF(){if(V.isLoggingEnabled()){V.Logger.log(4,"[Transport] Received Driver OnOpen Callback");}if(aY.getStatus()==P.CONNECTING){r.resetMessagesOnQueue();}r.setReady(true);}function ay(a4){ak++;r.setReady(false);if(V.isLoggingEnabled()){V.Logger.log(4,"[Transport] Received Driver OnError Callback with error: "+a4);}if(aY.getStatus()===P.STOPPED){au();}else{if(V.isLoggingEnabled()){V.Logger.log(3,"[Transport] Driver failure count: "+ak);}if(ak>=af){if(V.isLoggingEnabled()){V.Logger.log(3,"[Transport] Driver failure reached maximum permitted count: "+af);}ap();}ah("Driver Error: "+a4);}}function aM(){if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Received Driver OnClose Callback");}}function aU(){if(at!==c&&at!==null){if(V.isLoggingEnabled()){V.Logger.log(2,"[Transport] Clearing Scheduler resetTimeoutID : "+at);}V.Scheduler.cancel(at);at=null;}}function ad(a4,a5){aU();at=V.Scheduler.schedule(function(){ay("Request Timed Out, "+a4);},a5);if(V.isLoggingEnabled()){V.Logger.log(2,"[Transport] Setting Scheduler resetTimeoutID  : "+at+" for request: "+a4);}}function aI(a5){if(aP===null){return;}az=true;var a4=aY.requestFactory.buildRequest(a5);if(V.isLoggingEnabled()){V.Logger.log(3,"[Transport] Sending request number "+a5.requestID+" of "+aC+" for "+ab(a5.requestType)+" "+a4);}if(aP&&aP.usesKeepAlive()){aj(a5.session);}ad(a4,ae.sendResponseTimeout);aP.send(a5,a4);}function ai(a6){if(V.isLoggingEnabled()){V.Logger.log(2,"[Transport] Receiving Data: "+JSON.stringify(a6));}aU();az=false;var a4=false;if(a6){for(var a5=0;a5<a6.length;a5++){if(aY.responseFactory.dispatchResponse(a6[a5])){a4=true;if((a6[a5].d)[0]==Z.CLIENT_CLOSE){return a4;}}}}return a4;}function aG(a4){if(a4.length>0){return ai(JSON.parse(a4));}return false;}function aj(a4){if(V.isLoggingEnabled()){V.Logger.log(2,"[Transport] (Re)Scheduling KeepAlive to occur in "+aV+" ms");}clearTimeout(ax);ax=setTimeout(function(){aH(a4);},aV);}function aH(a4){if(az){if(V.isLoggingEnabled()){V.Logger.log(2,"[Transport] Currently inRequest.");}aj(a4);}else{if(V.isLoggingEnabled()){V.Logger.log(3,"[Transport] Sending KeepAlive");}r.prioritizeCommand({requestType:Z.KEEP_ALIVE,session:a4});}}function ah(bc){if(V.isLoggingEnabled()){V.Logger.log(7,"[Transport] Resetting the Session. Reason: "+bc);}au();var a4=aY.getStatus();var bd;if(ae.realms.length>1){bd=aK*ak;}else{bd=Math.min(aR,aK*aB);}if(aY.getStatus()===P.CONNECTED){if(V.isLoggingEnabled()){V.Logger.log(4,"[Transport] Adding Restart Request to Outbound Engine");}if(a3+10000<new Date()){aB=0;}aY.setStatus(P.RECONNECTING);var a6=[];var a5=aY.getResources();var a7=a5.length;for(var bb=0;bb<a7;bb++){if(a5[bb].isSubscribed()){a6.push(a5[bb]);}}if(a6.length>0){var a8={requestType:Z.BATCH_SUBSCRIBE,session:aY,resources:a6,resubscribe:true};r.prioritizeCommand(a8);}var a9={requestType:Z.SESSION_START,session:aY,reconnect:true};r.prioritizeCommand(a9);r.resetMessagesOnQueue();}if(aY.getStatus()===P.RECONNECTING||aY.getStatus()===P.CONNECTING){aB++;var ba=r.peek();if(ba===null||ba===c||ba.requestType!==Z.SESSION_START){r.prioritizeCommand({requestType:Z.SESSION_START,session:aY,reconnect:aY.getStatus()==P.RECONNECTING});}if(V.isLoggingEnabled()){V.Logger.log(6,"[Transport] Recreating Driver to "+aY.getStatus()+". Delaying open() for "+bd+"ms");}if(aQ){clearTimeout(aQ);}aQ=setTimeout(aE,bd);}}var aL=(function(){var a6={WEBSOCKET:"WEBSOCKET",XHR_STREAMING_CORS:"XHR_STREAMING_CORS",IFRAME_STREAMING_POSTMESSAGE:"IFRAME_STREAMING_POSTMESSAGE",EVENTSOURCE_STREAMING_POSTMESSAGE:"EVENTSOURCE_STREAMING_POSTMESSAGE",XHR_LONGPOLL_CORS:"XHR_LONGPOLL_CORS",XHR_LONGPOLL_POSTMESSAGE:"XHR_LONGPOLL_POSTMESSAGE",JSONP_LONGPOLL:"JSONP_LONGPOLL",NOXD_IFRAME_STREAMING:"NOXD_IFRAME_STREAMING"};var a4={WEBSOCKET:"nws",XHR_STREAMING_CORS:"ncc",IFRAME_STREAMING_POSTMESSAGE:"nsc",EVENTSOURCE_STREAMING_POSTMESSAGE:"nsse",XHR_LONGPOLL_CORS:"nlpc",XHR_LONGPOLL_POSTMESSAGE:"nlp",JSONP_LONGPOLL:"nlpj",NOXD_IFRAME_STREAMING:"nsc"};function a7(a9){return new a5[a9](a9);}var a5={};a5[a6.WEBSOCKET]=function(ba){var bb=true;var a9;this.name=ba;this.isClientSupported=function(){return("WebSocket" in b||"MozWebSocket" in b);};this.usesKeepAlive=function(){return true;};this.open=function(){bb=false;if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}var be;var bd=document.createElement("a");bd.href=ac.getCurrentRealm();if(bd.protocol==="http:"){be="ws://"+bd.host;}else{be="wss://"+bd.host;}be+="/sv/ws";if("WebSocket" in b){a9=new WebSocket(be);}else{if("MozWebSocket" in b){a9=new MozWebSocket(be);}else{return false;}}var bc=function(bg){if(bb){ac.onClose();}else{var bf=bg;if(bg.code){bf+=" Error Code : "+bg.code;}if(bg.reason){bf+=" Reason : "+bg.reason;}ac.onError(bf);}};a9.onopen=ac.onOpen;a9.onclose=bc;a9.onerror=bc;a9.onmessage=function(bf){if(bf.data){ac.d(bf.data);}};};this.send=function(bd,bc){a9.send(bc[0]+"&"+bc[1]);if(ac.isConnected()){r.setReady(true);}};this.close=function(){bb=true;a9.close();};};a5[a6.XHR_STREAMING_CORS]=function(ba){this.name=ba;var be,bc,bd=null;var bb=2000;var bf=false;var a9=ac.getCurrentSession().getConfig().maxStreamLengthStreamingCors;this.isClientSupported=function(){return((!!b.XMLHttpRequest)&&typeof(new XMLHttpRequest()).withCredentials!="undefined");};this.usesKeepAlive=function(){return true;};this.open=function(){var bg=false;if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}bd=ac.getCurrentRealm()+"/sv/nvLite";be=new XMLHttpRequest();be.onreadystatechange=function(){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+" Receiver] "+this.readyState+" : CumulativeResponseLength="+this.responseText.length);}if(this.readyState==3){bb=a8.processResponseChunk(this.responseText,bb);if(this.responseText.length>=a9&&!bg){bg=true;if(V.isLoggingEnabled()){V.Logger.log(4,"["+ba+" Receiver] Reached max stream length "+a9+", resetting.");}r.prioritizeCommand({requestType:Z.CLIENT_CLOSE,clientRequest:false});}}else{if(this.readyState==4&&!bg){ac.onError("Receiver Connection Closed = "+this.status);}}};bc=new XMLHttpRequest();bc.onreadystatechange=function(){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+" Sender] "+this.readyState+" : CumulativeResponseLength="+this.responseText.length);}if(this.readyState==4&&this.status!=200){ac.onError("Sender Connection Status = "+this.status);}else{if(this.readyState>3){ac.c(this.responseText);r.setReady(true);}}};ac.onOpen();};this.send=function(bh,bg){if(!bf){if(bh.requestType===Z.SESSION_START){be.open("GET",bd+"?"+bg[0]);be.withCredentials=true;be.send();}else{bc.open("POST",bd+"?"+bg[0]);bc.withCredentials=true;bc.setRequestHeader("Content-Type","text/plain");bc.send(bg[1]);}}};this.close=function(){if(!bf){bf=true;be.abort();be=null;bc.abort();bc=null;ac.onClose();}};};a5[a6.IFRAME_STREAMING_POSTMESSAGE]=function(a9){this.name=a9;var be,ba,bb=null;var bc=false;this.isClientSupported=function(){var bh=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return((typeof b.postMessage==="function"||typeof b.postMessage==="object")&&(!bh));};this.usesKeepAlive=function(){return true;};this.open=function(){if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}bb=ac.getCurrentRealm()+"/sv/nvLite";r.setReady(false);be=ba=new V.CrossDomainProxy(ac.getCurrentSession(),this.name,ac.getCurrentRealm(),bg,ac.onError);ba.onreadystatechange=function(){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+" Sender] "+this.readyState+" : "+this.responseText);}if(this.readyState==4){if(this.status!=200){ac.onError(a9+" sender status "+this.status);}else{if(bc){r.setReady(true);}}}};};function bg(){bc=true;ac.onOpen();}function bf(bh){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+" Receiver] "+ac.getCurrentRealm()+"/sv/nvLite?"+bh);}be.proxyRequest("createForeverIFrame",[ac.getCurrentRealm()+"/sv/nvLite?"+bh]);}function bd(bi,bh){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+" Sender] "+ac.getCurrentRealm()+"/sv/nvLite?"+bh);}ba.open("POST",bb+"?"+bh[0]);ba.send(bh[1]);}this.send=function(bi,bh){if(bi.requestType===Z.SESSION_START){bf(bh[0]+"&"+bh[1]);}else{bd(bi,bh);}};this.close=function(){bc=false;ba.abort();be.destroy();ba=null;be=null;ac.onClose();};};a5[a6.EVENTSOURCE_STREAMING_POSTMESSAGE]=function(ba){this.name=ba;var a9=this;var bd,bb=null;this.isClientSupported=function(){if(!("EventSource" in b)){return false;}var bf=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return((typeof b.postMessage==="function"||typeof b.postMessage==="object")&&(!bf));};this.usesKeepAlive=function(){return true;};this.open=function(){if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}bd=bb=new V.CrossDomainProxy(ac.getCurrentSession(),this.name,ac.getCurrentRealm(),ac.onOpen,ac.onError);bb.onreadystatechange=function(){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+" Sender] "+this.readyState+" : "+this.responseText);}if(this.readyState==4){if(this.status!=200){ac.onError(ba+" sender status "+this.status);}else{r.setReady(true);}}};};function be(bf){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+" Receiver] "+ac.getCurrentRealm()+"/sv/nvLite?"+bf);}bd.proxyRequest("createEventSource",ac.getCurrentRealm()+"/sv/nvLite?"+bf);a9.send=bc;}function bc(bg,bf){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+" Sender] "+ac.getCurrentRealm()+"/sv/nvLite?"+bf);}bb.open("POST",ac.getCurrentRealm()+"/sv/nvLite?"+bf[0],true);bb.send(bf[1]);}this.send=function(bg,bf){be(bf[0]+"&"+bf[1]);};this.close=function(){bb.abort();bb=null;bd=null;ac.onClose();};};a5[a6.XHR_LONGPOLL_CORS]=function(ba){this.name=ba;var bc,bb,a9=null;var bd=false;this.isClientSupported=function(){return((!!b.XMLHttpRequest)&&typeof(new XMLHttpRequest()).withCredentials!="undefined");};this.usesKeepAlive=function(){return false;};this.open=function(){if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}a9=ac.getCurrentRealm()+"/sv/nvLite";bc=new XMLHttpRequest();bc.onreadystatechange=function(){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+"] receiver ("+this.readyState+") : "+this.responseText);}if(this.readyState==4){if(this.status!=200){ac.onError(ba+" receiver status "+this.status);}else{ac.d(this.responseText);if(!bd){setTimeout(a8.longpoll,0);}}}};bb=new XMLHttpRequest();bb.onreadystatechange=function(){if(this.readyState==4){if(this.status!=200){ac.onError(ba+" sender status "+this.status);}else{if(this.responseText){ac.d(this.responseText);if(!bd){a8.longpoll();}}r.setReady(true);}}};ac.onOpen();};this.send=function(bf,be){if(!bd){if(bf.requestType===Z.KEEP_ALIVE||bf.requestType===Z.SESSION_START){bc.open("GET",a9+"?"+be[0]+"&"+be[1]);bc.withCredentials=true;bc.send();}else{bb.open("POST",a9+"?"+be[0]);bb.withCredentials=true;bb.setRequestHeader("Content-Type","text/plain");bb.send(be[1]);}}};this.close=function(){if(!bd){bd=true;a8.cancelLongpollTimeout();try{bc.onreadystatechange=null;bb.onreadystatechange=null;bc.abort();bb.abort();}catch(be){if(V.isLoggingEnabled()){V.Logger.log(1,"["+ba+"] exception on close(): "+be.message);}}bc=null;bb=null;ac.onClose();}};};a5[a6.XHR_LONGPOLL_POSTMESSAGE]=function(a9){this.name=a9;var bc,ba,bb=null;var bd=false;this.isClientSupported=function(){var be=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return((typeof b.postMessage==="function"||typeof b.postMessage==="object")&&(!be));};this.usesKeepAlive=function(){return false;};this.open=function(){if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}bb=ac.getCurrentRealm()+"/sv/nvLite";bc=new V.CrossDomainProxy(ac.getCurrentSession(),a9,ac.getCurrentRealm(),be,ac.onError);bc.onreadystatechange=function(){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+"] receiver: ("+this.readyState+") : "+this.responseText);}if(this.readyState==4){if(this.status!=200){ac.onError(a9+" receiver status "+this.status);}else{ac.d(this.responseText);if(!bd){a8.longpoll();}}}};ba=new V.CrossDomainProxy(ac.getCurrentSession(),a9,ac.getCurrentRealm(),be,ac.onError);ba.onreadystatechange=function(){if(this.readyState==4){if(this.status!=200){ac.onError(a9+" sender status "+this.status);}else{if(this.responseText){ac.d(this.responseText);if(!bd){a8.longpoll();}}r.setReady(true);}}};function be(){if(!!bc&&!!ba&&bc.initialized&&ba.initialized){ac.onOpen();}}};this.send=function(bf,be){if(!bd){if(bf.requestType===Z.KEEP_ALIVE){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+"] receiver requesting: "+be);}bc.open("GET",bb+"?"+be[0]);bc.send();}else{if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+"] sender requesting: "+be);}ba.open("POST",bb+"?"+be[0]);ba.send(be[1]);}}};this.close=function(){if(!bd){bd=true;a8.cancelLongpollTimeout();bc.onreadystatechange=null;ba.onreadystatechange=null;bc.abort();ba.abort();bc=null;ba=null;ac.onClose();}};};a5[a6.JSONP_LONGPOLL]=function(a9){this.name=a9;var bd,bb,bc=null;var be=false;this.id=V.generateUniqueID();this.isClientSupported=function(){return true;};this.usesKeepAlive=function(){return false;};function ba(bf){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+"] receiverResponseHandler: "+bf);}if(ac.c(bf)){if(ac.isConnected()){r.setReady(true);}}if(!be){a8.longpoll();}}this.open=function(){if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}bc=ac.getCurrentRealm()+"/sv/nvLite";b.LPReadyStateCB=ba;bd=new V.JSONP_Poller(ac.onError);bb=new V.FormSubmitter();ac.onOpen();};this.send=function(bg,bf){if(!be){if(bg.requestType===Z.KEEP_ALIVE||bg.requestType===Z.SESSION_START){if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+"] Receiver Req: "+bf[0]);}bd.send(bc,bf);}else{if(V.isLoggingEnabled()){V.Logger.log(1,"["+a9+"] Sender Req: "+bf[0]+"&"+bf[1]);}bb.send(bc,bf);}}};this.close=function(){if(!be){be=true;a8.cancelLongpollTimeout();bd.destroy();bd=null;bb.destroy();bb=null;b.LPReadyStateCB=function(){};ac.onClose();}};};a5[a6.NOXD_IFRAME_STREAMING]=function(bb){this.name=bb;var bl=this;var a9,bf,bd=null;var bg=0;var bc=false;this.isClientSupported=function(){if(!aY){return true;}var bo=aY.getConfig().realms;var bq=bo.length;var bp=location.host;var br=new RegExp("https?://"+bp+"/?");for(var bn=0;bn<bq;bn++){var bm=V.getCanonicalOrigin(bo[bn]);if(br.test(bm)){return true;}}return false;};this.usesKeepAlive=function(){return true;};function bk(bm){if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] receiverCB: "+typeof bm+" "+bm);}if(bm){ac.c(bm);}}function be(bm){if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] senderCB: "+typeof bm+" "+bm);}if(bm){ac.d(bm);}r.setReady(true);}function bi(bn,bm){ac.onError(bn);}function bh(bm){a9=V.createForeverIFrame(bd+"?"+bm,bk,bi);if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+" Receiver] "+bd+"?"+bm);}bl.send=ba;}function ba(bp,bo){if(!bc){if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+" Sender] "+bd+"?"+bo);}var bm=(bp.requestType===Z.CLIENT_CLOSE);bf.open("POST",bd+"?"+bo[0],bm);bf.onreadystatechange=bj;bf.setRequestHeader("Content-Type","application/x-www-form-urlencoded");try{if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] XHR POST: "+bo);}bf.send(bo[1]);return true;}catch(bn){return false;}}}function bj(){if(bf===null){if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] statechangecb: Sender is already null");}return;}var bn=bf.readyState;if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] statechangecb: State now changed to "+bn);}if(bn!==4){return;}var bp;try{bp=bf.status;}catch(bm){if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] statechangecb : failed to read status code");}}if(bp===200||bp===0){be(bf.responseText);}else{if(V.isLoggingEnabled()){V.Logger.log(1,"["+bb+"] statechangecb - status of "+bp+" forcing session reset");}bg++;ac.onError("Error transports has been closed");}var bo=document.getElementById("NVLSubFrame");if(bo){while(bo.hasChildNodes()){bo.removeChild(bo.lastChild);}}}this.open=function(){if(!this.isClientSupported()){ac.onError(this.name+" driver not supported by client");return;}bd=ac.getCurrentRealm()+"/sv/nvLite";bf=V.initXMLHTTP("xmlhttp");bf.onreadystatechange=bj;b.onMessage=bk;b.errorCB=bi;ac.onOpen();return true;};this.send=function(bn,bm){bh(bm[0]+"&"+bm[1]);};this.close=function(){if(!bc){bc=true;b.onMessage=function(){};b.errorCB=function(){};bf.onreadystatechange=function(){};bf.abort();if(a9.close){a9.close();}bf=null;a9=null;ac.onClose();}};};var a8=(function(){var a9=null;function bb(){if(aP===null){bd();return;}bd();var bf={requestType:Z.KEEP_ALIVE,requestID:aC++};var be=aY.requestFactory.buildRequest(bf);if(V.isLoggingEnabled()){V.Logger.log(1,"["+aP.name+"] longpoll() Sending request number "+bf.requestID+" of "+aC+" for "+ab(bf.requestType)+" "+be);}aP.send(bf,be);ba(aP.name);}function ba(be){a9=setTimeout(function(){ac.onError(be+" Longpoll Timeout");},ac.getConfig().sessionTimeoutMs);}function bd(){if(a9!==null){clearTimeout(a9);}}function bc(be,bg){if(bg>be.length){return bg;}var bf;do{bf=be.indexOf("];[",bg)+2;if(bf===1){if(be.charAt(be.length-1)==";"&&be.charAt(be.length-2)=="]"){bf=be.length;}else{return bg;}}if(bf>bg){ac.d(be.substring(bg,bf-1));bg=bf;}}while(bf!=be.length);return bg;}return{longpoll:bb,cancelLongpollTimeout:bd,processResponseChunk:bc};}());return{Names:a6,WireProtocol:a4,createDriver:a7};}());var aW=[];var ag=[aL.Names.WEBSOCKET,aL.Names.XHR_STREAMING_CORS,aL.Names.IFRAME_STREAMING_POSTMESSAGE,aL.Names.EVENTSOURCE_STREAMING_POSTMESSAGE,aL.Names.XHR_LONGPOLL_CORS,aL.Names.XHR_LONGPOLL_POSTMESSAGE,aL.Names.NOXD_IFRAME_STREAMING,aL.Names.JSONP_LONGPOLL];return{Drivers:aL,initializeDriver:an,supportsDriver:aw,setPreferredDriver:a2,setUp:aO,open:aE,tearDown:au,getCurrentDriver:aZ,getCurrentRealm:aX,getCurrentSession:aS,getConfig:av,getRequestCountIncrement:aD,stop:aA,getNirvanaCookie:am,onConnect:ar,onOpen:aF,onError:ay,onClose:aM,send:aI,c:ai,d:aG,isConnected:aJ};}());var r=(function(){var ak=false;var af=[];function ag(){if(ak&&af.length>0){var am=al();if(am!==null){if(am.requestType==Z.SESSION_START&&ac.getCurrentSession().getStatus()===P.CONNECTED){V.Logger.log(3,"[Outbound Engine] Dequeueing unnecessary session start request as already connected.","Req #"+am.requestID);r.dequeueCommand(am.requestID);ag();}else{ak=false;am.sent=true;if(V.isLoggingEnabled()){V.Logger.log(3,"[Outbound Engine] Sending Command to Transport Layer.","Req #"+am.requestID);}ac.send(am);}}}}function ad(am){ak=am;ag();}function ah(am){am.requestID=ac.getRequestCountIncrement();am.sent=false;if(V.isLoggingEnabled()){V.Logger.log(3,"[Outbound Engine] Queueing Command "+ab(am.requestType),am);}af.push(am);ag();}function aj(am){am.requestID=ac.getRequestCountIncrement();am.sent=false;af.unshift(am);if(V.isLoggingEnabled()){V.Logger.log(3,"[Outbound Engine] Prioritizing Command "+ab(am.requestType),am);}ag();}function ae(aq){var an=af.length;if(V.isLoggingEnabled()){var am="";for(var ao=0;ao<an;ao++){am+=ab(af[ao].requestType)+" ";}V.Logger.log(2,"[Outbound Engine] OutboundQueue = "+am);}for(var ap=0;ap<an;ap++){if(af[ap].requestID==aq){if(V.isLoggingEnabled()){V.Logger.log(3,"[Outbound Engine] Dequeueing Command "+ab(af[ap].requestType),af[ap],aq);}return af.splice(ap,1)[0];}}if(V.isLoggingEnabled()){V.Logger.log(3,"[Outbound Engine] No matching queued command to dequeue for request ID: ",aq);}return null;}function ai(){if(V.isLoggingEnabled()){V.Logger.log(2,"[Outbound Engine] Resetting messages on outbound queue");}for(var am=0;am<af.length;am++){if(af[am].requestType===Z.KEEP_ALIVE||af[am].requestType===Z.CLIENT_CLOSE){af.splice(am,1);}else{af[am].sent=false;af[am].requestID=ac.getRequestCountIncrement();}}}function al(){var am=af.length;for(var an=0;an<am;an++){if(!af[an].sent){return af[an];}}return null;}return{setReady:ad,queueCommand:ah,resetMessagesOnQueue:ai,prioritizeCommand:aj,dequeueCommand:ae,peek:al};}());var G;function f(){var af=[];var ae=false;var ad=function(am,al){var aj=af[am];if(!af[am]){aj=[];af[am]=aj;}var ak=aj.length;for(var ai=0;ai<ak;ai++){if(al==aj[ai]){return;}}if(ae){aj=aj.slice(0);af[am]=aj;}aj.push(al);};var ag=function(am,al){var aj=af[am];if(!aj){return;}if(al===true){aj=[];af[am]=aj;}if(ae){aj=aj.slice(0);af[am]=aj;}var ak=aj.length;for(var ai=0;ai<ak;ai++){if(al==aj[ai]){aj.splice(ai,1);return;}}};var ah=function(ap,ao,an){var ak=af[ap];if(!ak){return;}ae=true;var al=ak.length;for(var aj=0;aj<al;aj++){var am=ak[aj];if(V.isLoggingEnabled()){V.Logger.log(0,"[NotifyListeners] "+am+" : "+an);}try{am(ao,an);}catch(ai){if(V.isLoggingEnabled()){V.Logger.logException(9,ai);}}}ae=false;};return{on:ad,removeListener:ag,notifyListeners:ah};}function T(ae,ad){i[ae]=ad;}function u(ad){this.name="AlreadySubscribedException";if(typeof ad!="undefined"&&ad!==null){this.message="Already subscribed to "+ad;}if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function I(ad){this.name="InvalidDriverException";if(typeof ad!="undefined"&&ad!==null){this.message=ad+" is not a valid driver name";}if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function F(ad){this.name="NoValidDriversException";this.message="This client does not support any of the currently configured drivers";if(V.isLoggingEnabled()){V.Logger.log(8,"["+this.name+"] "+this.message,ad);}}function d(ad,ae){this.name="DriverSecurityException";if(typeof ad!="undefined"&&ad!==null){this.message=ad+" - "+ae;}if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function E(ad,ae){this.name="AlreadyCommittedException";this.message="Already Committed Transaction "+ae+" to resource "+ad;if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function C(ad,ae){this.name="SessionException";if(typeof ad!="undefined"&&ad!==null){this.message=ad+" - "+ae;}if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function n(ad){this.name="SecurityException";this.message=ad;if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function p(ae,ad){this.name="MissingResourceException";this.resourceName=ae;this.message=ad;if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.message);}}function x(ad){this.name="GenericException";if(ad){this.errorMessage=ad;}if(V.isLoggingEnabled()){V.Logger.log(7,"["+this.name+"] "+this.errorMessage);}}function Y(ad){if(G){if(G.getStatus()!==P.STOPPED&&G.getStatus()!==P.NOTSTARTED){K.notifyListeners(a.Observe.ERROR,G,{name:"SessionExistsException",message:"Cannot Create Session: Session Already Exists"});return c;}}G=new D(ae(ad));return G;function ae(ai){function ak(ao,an){if(typeof ao=="undefined"||ao===null){return an;}return !!ao;}function am(ao,an){ao=parseInt(ao,10);if(isNaN(ao)){ao=an;}return ao;}if(typeof ai=="undefined"||ai===null){ai={};}ai.debugLevel=am(ai.debugLevel,9);V.setDebugLevel(ai.debugLevel);if(typeof ai.applicationName=="undefined"){ai.applicationName="GenericJSClient";}if(typeof ai.sessionName=="undefined"){ai.sessionName="GenericJSSession";}if(typeof ai.username=="undefined"){ai.username="JSUser_"+V.generateUniqueID();}if(typeof ai.crossDomainPath=="undefined"){ai.crossDomainPath="/lib/js";}if(typeof ai.realms=="undefined"){var af=document.location.protocol+"//"+document.location.hostname;if(document.location.host.match(/:[0-9]+$/)){af+=":"+document.location.port;}else{af=V.getCanonicalOrigin(af);}ai.realms=[af];}var aj=document.location.protocol+"//"+document.location.hostname;if(document.location.protocol!="file:"){if(document.location.host.match(/:[0-9]+$/)){aj+=":"+document.location.port;}else{aj=V.getCanonicalOrigin(aj);}}ai.currentDomain=aj;ai.serverLogging=ak(ai.serverLogging,false);ai.verboseKeepalives=ak(ai.verboseKeepalives,false);ai.enableDataStreams=ak(ai.enableDataStreams,true);ai.sessionTimeoutMs=am(ai.sessionTimeoutMs,120000);ai.sendResponseTimeout=am(ai.sendResponseTimeout,10000);ai.openDriverTimeout=am(ai.openDriverTimeout,15000);ai.maxStreamLengthStreamingCors=am(ai.maxStreamLengthStreamingCors,10000000);ai.rememberDriver=ak(ai.rememberDriver,false);ai.applyUserAgentHeuristics=ak(ai.applyUserAgentHeuristics,false);if(V.isLoggingEnabled()){var ah="";for(var ag in ai){if(ai.hasOwnProperty(ag)){var al=ai[ag];ah+=ag+":\t";if(al.constructor==Array){ah+=al.join("\n\t\t");}else{ah+=al;}ah+="\n";}}V.Logger.log(5,"[Session] Configuration:\n"+ah);}return ai;}}function S(){return new U(c,-1,c,c,c,c,c,c);}function q(){return k.createDictionary();}function M(ae,ad){if(K===null){K=f();T(b.Nirvana,K);}K.on(ae,ad);}function g(ae,ad){K.removeListener(ae,ad);}function D(ag){var ai;var an=this;var al=f();var ah=ag;var am="-1";var ad="";var aj=P.NOTSTARTED;var ak=-1;var af=[];var ae={};ae.g1="";T(an,al);this.start=function(){if(!(aj===P.NOTSTARTED||aj===P.STOPPED)){i[b.Nirvana].notifyListeners(a.Observe.ERROR,ai,new C("Nirvana Session","start() can only be invoked on a new or stopped session"));return ai;}var ap=(aj===P.STOPPED);if(document.getElementById(m)===null){a.initialize();if(V.isLoggingEnabled()){V.Logger.log(1,"[Nirvana] Waiting for DOM to be ready");}setTimeout(an.start,15);return ai;}if(V.isLoggingEnabled()){V.Logger.log(6,"[Session] Creating Session");}aj=P.CONNECTING;var aq={session:an,requestType:Z.SESSION_START,listenerManager:al};r.prioritizeCommand(aq);ac.setUp(an,ap);ac.open();var ao=function(){an.stop(true);};if(b.addEventListener){b.addEventListener("beforeunload",ao,false);}else{if(b.attachEvent){b.attachEvent("onbeforeunload",ao);}}return ai;};this.stop=function(ao){if(V.isLoggingEnabled()){V.Logger.log(6,"[Session] Stopping Session");}if(aj===P.STOPPED||aj===P.NOTSTARTED){return ai;}aj=P.STOPPED;var ap={requestType:Z.CLIENT_CLOSE,clientRequest:true};if(ao){r.prioritizeCommand(ap);}else{r.queueCommand(ap);}return ai;};this.destroy=function(){this.stop();G=null;return ai;};this.subscribe=function(ao){try{var au=[];for(var at=0;at<ao.length;at++){var ar=ao[at];if(ar.isSubscribed()){var aq=new u(ar.getName());ar.notifyListeners(a.Observe.ERROR,ar,aq);al.notifyListeners(a.Observe.ERROR,ai,aq);i[b.Nirvana].notifyListeners(a.Observe.ERROR,ai,aq);}else{au.push(an.getResourceByName(ar.getName()));}}if(ao.length){var av=an.prepareCommand(Z.BATCH_SUBSCRIBE);av.resources=au;r.queueCommand(av);}}catch(ap){if(V.isLoggingEnabled()){V.Logger.logException(8,ap);}i[b.Nirvana].notifyListeners(a.Observe.ERROR,ai,ap);}return ai;};this.getChannel=function(ao){ao=V.getCanonicalResourceName(ao);var ap=an.getResourceByName(ao);if(!ap){var aq=f();ap=new N(ao,aq,an);T(ap,aq);}else{return ap.getClientResource();}return ap;};this.getQueue=function(ar,ap){ar=V.getCanonicalResourceName(ar);var ao=an.getResourceByName(ar);if(!ao){var aq=f();if(ap){ao=new O(ar,aq,an);}else{ao=new aa(ar,aq,an);}T(ao,aq);}else{return ao.getClientResource();}return ao;};this.notifyListeners=function(aq,ap,ao){al.notifyListeners(aq,ap,ao);};this.on=function(ap,ao){al.on(ap,ao);return ai;};this.removeListener=function(ap,ao){al.removeListener(ap,ao);return ai;};this.getUsername=function(){return ah.username;};this.getCurrentDriver=function(){return ac.getCurrentDriver();};this.getCurrentRealm=function(){return ac.getCurrentRealm();};this.pushResource=function(ao){af.push(ao);};this.setGroupAlias=function(ap,ao){ae[ao]=ap;};this.getGroupName=function(ao){return ae[ao];};this.getResources=function(){return af;};this.getResourceByName=function(ap){var aq=af.length;for(var ao=0;ao<aq;ao++){var ar=af[ao];if(ar.getName()==ap){return ar;}}};this.setResourceAlias=function(ap,at){var aq=af.length;for(var ao=0;ao<aq;ao++){var ar=af[ao];if(ar.getName()===ap){ar.setAlias(at);return;}}};this.getResourceByAlias=function(ar){var ap=af.length;for(var ao=0;ao<ap;ao++){var aq=af[ao];if(aq.getAlias()===ar){return aq;}}};this.setSessionID=function(ao){am=""+ao;aj=P.CONNECTED;};this.setDataStreamID=function(ao){ad=""+ao;};this.getLongPollRequestID=function(){return ak;};this.setLongPollRequestID=function(ao){ak=ao;};this.getSessionID=function(){return am;};this.getDataStreamID=function(){return ad;};this.getConfig=function(){return ah;};this.setStatus=function(ao){aj=ao;};this.getStatus=function(){return aj;};this.isDataStreamEnabled=function(){return ah.enableDataStreams;};this.prepareCommand=function(ao){return{session:this,requestType:ao};};this.requestFactory=V.HTTPRequestFactory();this.responseFactory=V.HTTPResponseFactory(an);ai={on:this.on,removeListener:this.removeListener,isDataStreamEnabled:this.isDataStreamEnabled,getConfig:this.getConfig,getStatus:this.getStatus,getChannel:this.getChannel,getQueue:this.getQueue,getUsername:this.getUsername,getSessionID:this.getSessionID,getDataStreamID:this.getDataStreamID,getCurrentRealm:this.getCurrentRealm,getCurrentDriver:this.getCurrentDriver,start:this.start,stop:this.stop,destroy:this.destroy,subscribe:this.subscribe};return ai;}function N(am,al,af){var an=this;var ae;var ak=al;var aj=false;var ai=0;var ad="";var ah;var ag=-1;this.getClientResource=function(){return ae;};this.subscribe=function(){var ao={requestType:Z.RESOURCE_SUBSCRIBE,session:af,resource:an};r.queueCommand(ao);return ae;};this.unsubscribe=function(){var ao={requestType:Z.RESOURCE_UNSUBSCRIBE,session:af,resource:an};r.queueCommand(ao);return ae;};this.getAlias=function(){return ah;};this.setAlias=function(ao){ah=ao;};this.setSubscribed=function(ao){aj=ao;if(aj===false){ag=-1;}};this.isSubscribed=function(){return aj;};this.publish=function(ao){var ap={requestType:Z.RESOURCE_PUBLISH,session:af,resource:an,event:ao};r.queueCommand(ap);return ae;};this.createTransaction=function(){var ao=f();var ap=af.getSessionID()+V.generateTransactionID();return new L(ap,ao,an);};this.getStartEID=function(){return ai;};this.setStartEID=function(ao){ai=ao;return ae;};this.getCurrentEID=function(){return ag;};this.setCurrentEID=function(ao){ag=ao;};this.getFilter=function(){return ad;};this.setFilter=function(ao){ad=ao;return ae;};this.getName=function(){return am;};this.getResourceType=function(){return a.CHANNEL_RESOURCE;};this.on=function(ap,ao){ak.on(ap,ao);return ae;};this.removeListener=function(ap,ao){ak.removeListener(ap,ao);return ae;};this.notifyListeners=function(aq,ap,ao){ak.notifyListeners(aq,ap,ao);};af.pushResource(an);ae={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,createTransaction:this.createTransaction,getStartEID:this.getStartEID,setStartEID:this.setStartEID,getFilter:this.getFilter,setFilter:this.setFilter,getName:this.getName,getResourceType:this.getResourceType};return ae;}function aa(af,ak,ag){var al=this;var ae;var aj=ak;var ai=false;var ad="";var ah;this.getClientResource=function(){return ae;};this.subscribe=function(){var am={requestType:Z.RESOURCE_SUBSCRIBE,session:ag,resource:al};r.queueCommand(am);return ae;};this.unsubscribe=function(){var am={requestType:Z.RESOURCE_UNSUBSCRIBE,session:ag,resource:al};r.queueCommand(am);return ae;};this.getAlias=function(){return ah;};this.setAlias=function(am){ah=am;};this.setSubscribed=function(am){ai=am;};this.isSubscribed=function(){return ai;};this.publish=function(am){var an={requestType:Z.RESOURCE_PUBLISH,session:ag,resource:al,event:am};r.queueCommand(an);return ae;};this.createTransaction=function(){var am=f();var an=ag.getSessionID()+V.generateTransactionID();return new L(an,am,al);};this.getFilter=function(){return ad;};this.setFilter=function(am){ad=am;return ae;};this.getName=function(){return af;};this.getResourceType=function(){return a.QUEUE_RESOURCE;};this.on=function(an,am){aj.on(an,am);return ae;};this.removeListener=function(an,am){aj.removeListener(an,am);return ae;};this.notifyListeners=function(ao,an,am){aj.notifyListeners(ao,an,am);};ag.pushResource(al);ae={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,getFilter:this.getFilter,setFilter:this.setFilter,getName:this.getName,getResourceType:this.getResourceType,createTransaction:this.createTransaction};return ae;}function O(af,al,ag){var am=this;var ae;var ai=false;var aj=al;var ad="";var ak=5;var ah;this.getClientResource=function(){return ae;};this.subscribe=function(){var an={requestType:Z.RESOURCE_SUBSCRIBE,session:ag,resource:am};r.queueCommand(an);return ae;};this.unsubscribe=function(){var an={requestType:Z.RESOURCE_UNSUBSCRIBE,session:ag,resource:am};r.queueCommand(an);return ae;};this.getAlias=function(){return ah;};this.setAlias=function(an){ah=an;};this.setSubscribed=function(an){ai=an;};this.isSubscribed=function(){return ai;};this.publish=function(an){var ao={requestType:Z.RESOURCE_PUBLISH,session:ag,resource:am,event:an};r.queueCommand(ao);return ae;};this.createTransaction=function(){var an=f();var ao=ag.getSessionID()+V.generateTransactionID();return new L(ao,an,am);};this.commit=function(an){var ao={requestType:Z.QUEUE_COMMIT,session:ag,resource:am,event:an};r.queueCommand(ao);return ae;};this.commitAll=function(){var an={requestType:Z.QUEUE_COMMIT,session:ag,resource:am,event:event};r.queueCommand(an);return ae;};this.rollback=function(an){var ao={requestType:Z.QUEUE_ROLLBACK,session:ag,resource:am,event:an};r.queueCommand(ao);return ae;};this.getFilter=function(){return ad;};this.setFilter=function(an){ad=an;return ae;};this.getWindowSize=function(){return ak;};this.setWindowSize=function(an){ak=an;return ae;};this.getName=function(){return af;};this.getResourceType=function(){return a.TRANSACTIONAL_QUEUE_RESOURCE;};this.on=function(ao,an){aj.on(ao,an);return ae;};this.removeListener=function(ao,an){aj.removeListener(ao,an);return ae;};this.notifyListeners=function(ap,ao,an){aj.notifyListeners(ap,ao,an);};ag.pushResource(am);ae={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,commitAll:this.commitAll,commit:this.commit,rollback:this.rollback,getFilter:this.getFilter,setFilter:this.setFilter,getWindowSize:this.getWindowSize,setWindowSize:this.setWindowSize,getName:this.getName,getResourceType:this.getResourceType,createTransaction:this.createTransaction};return ae;}function U(aj,af,ai,ae,ah,ag,ad,ak){this.parentSession=aj;this.dictionary=ak;this.eventAttributes=ah;this._data=ag;this.tag=ad;this.ttl=0;this.resource=ai;this.eventID=af;this.resourceName=ae;}U.prototype.getSession=function e(){return this.parentSession;};U.prototype.getResource=function z(){return this.resource;};U.prototype.getResourceName=function A(){return this.resourceName;};U.prototype.getTTL=function l(){return this.ttl;};U.prototype.setTTL=function s(ad){this.ttl=ad;return this;};U.prototype.getEID=function J(ad){return V.convertLongFromServer(ad,this.eventID);};U.prototype.getData=function v(ad){if(ad==a.BYTE_ARRAY_AS_BASE64_STRING){return this._data;}else{if(ad==a.BYTE_ARRAY_AS_INT_ARRAY){return V.base64Decode(this._data,true);}else{return V.base64Decode(this._data);}}};U.prototype.setData=function y(ad,ae){if(ae==a.BYTE_ARRAY_AS_BASE64_STRING){this._data=ad;}else{if(ae==a.BYTE_ARRAY_AS_INT_ARRAY){this._data=V.base64Encode(ad,true);}else{this._data=V.base64Encode(ad);}}return this;};U.prototype.getTag=function R(){return this.tag;};U.prototype.setTag=function W(ad){this.tag=ad;return this;};U.prototype.getDictionary=function w(){if(!this.dictionary){this.dictionary=new k({});}return this.dictionary;};U.prototype.getEventAttributes=function o(){if(!this.eventAttributes){this.eventAttributes=new h({});}return this.eventAttributes;};U.prototype.hasData=function Q(){return this._data!==c;};U.prototype.hasTag=function X(){return this.tag!==c;};U.prototype.hasDictionary=function H(){return this.dictionary!==c;};k.STRING=0;k.LONG=1;k.DOUBLE=2;k.BOOLEAN=3;k.INTEGER=4;k.FLOAT=5;k.CHARACTER=6;k.BYTE=7;k.DICTIONARY=9;k.ARRAY=-1;k.createDictionary=function(){return new k({});};function k(ad){this.innerProperties=ad;}k.prototype.getKeys=function(){var ae=[];for(var ad in this.innerProperties){if(this.innerProperties.hasOwnProperty(ad)){ae.push(ad);}}return ae;};k.prototype.get=function(ag,ah){if(this.innerProperties.hasOwnProperty(ag)){var af=this.innerProperties[ag];if(af[0]===a.EventDictionary.ARRAY){if(af[1]===a.EventDictionary.LONG){var ai=af[2].length;var ad=af[2];var aj=[];for(var ae=0;ae<ai;ae++){aj[ae]=V.convertLongFromServer(ah,ad[ae]);}return aj;}return af[2];}else{if(af[0]===a.EventDictionary.LONG){return V.convertLongFromServer(ah,af[1]);}return af[1];}}return null;};k.prototype.getType=function(ad){return this.innerProperties[ad][0];};k.prototype.getArrayType=function(ad){return this.innerProperties[ad][1];};k.prototype.put=function(ad,af,ae){this.innerProperties[ad]=[ae,af];return this;};k.prototype.putString=function(ad,ae){this.innerProperties[ad]=[k.STRING,ae];return this;};k.prototype.putLong=function(ad,ae){this.innerProperties[ad]=[k.LONG,ae];return this;};k.prototype.putDouble=function(ad,ae){this.innerProperties[ad]=[k.DOUBLE,ae];return this;};k.prototype.putBoolean=function(ad,ae){this.innerProperties[ad]=[k.BOOLEAN,ae];return this;};k.prototype.putInteger=function(ad,ae){this.innerProperties[ad]=[k.INTEGER,ae];return this;};k.prototype.putFloat=function(ad,ae){this.innerProperties[ad]=[k.FLOAT,ae];return this;};k.prototype.putChar=function(ad,ae){this.innerProperties[ad]=[k.CHARACTER,ae];return this;};k.prototype.putByte=function(ad,ae){this.innerProperties[ad]=[k.BYTE,ae];return this;};k.prototype.putDictionary=function(ad,ae){this.innerProperties[ad]=[k.DICTIONARY,ae];return this;};k.prototype.putArray=function(ae,af,ad){this.innerProperties[ae]=[k.ARRAY,ad,af];return this;};h.HEADER_KEYS=["_allowMerging","pubHost","pubName","subHost","subName","subID","messageType"];h.SERVER_HEADER_KEYS=["timeStamp","_isDelta","_isRedelivered","_isRegistered","deadEID","deadEventChannel","joinEID","joinChannel","joinRealm","joinPath"];h.JMS_HEADER_KEYS=["messageID","correlationID","type","expiration","destination","deliveryMode","priority","userID","appID","replyToName","replyToType"];function h(ad){this.innerAttributes=ad;}h.prototype.getSubscriberHost=function(){return this.innerAttributes.subHost;};h.prototype.getSubscriberName=function(){return this.innerAttributes.subName;};h.prototype.getSubscriberID=function(){return this.innerAttributes.subID;};h.prototype.getPublisherHost=function(){return this.innerAttributes.pubHost;};h.prototype.getPublisherName=function(){return this.innerAttributes.pubName;};h.prototype.setSubscriberHost=function(ad){this.innerAttributes.subHost=ad;return this;};h.prototype.setSubscriberName=function(ad){this.innerAttributes.subName=ad;return this;};h.prototype.setSubscriberNames=function(ad){this.innerAttributes.subName=ad;return this;};h.prototype.setPublisherName=function(ad){this.innerAttributes.pubName=ad;return this;};h.prototype.setPublisherHost=function(ad){this.innerAttributes.pubHost=ad;return this;};h.prototype.getAttribute=function(ad){return this.innerAttributes[ad];};h.prototype.getAttributeNames=function(){var ad=[];for(var ae in this.innerAttributes){if(this.innerAttributes.hasOwnProperty(ae)){ad.push(ae);}}return ad;};h.prototype.setAttribute=function(ad,ae){this.innerAttributes[ad]=ae;return this;};h.prototype.getTimeStamp=function(ad){return V.convertLongFromServer(ad,this.innerAttributes.timeStamp);};h.prototype.getAllowMerge=function(){return this.innerAttributes._allowMerging;};h.prototype.isDelta=function(){return this.innerAttributes._isDelta;};h.prototype.isRedelivered=function(){return this.innerAttributes._isRedelivered;};h.prototype.isRegistered=function(){return this.innerAttributes._isRegistered;};h.prototype.getJoinChannel=function(){return this.innerAttributes.joinChannel;};h.prototype.getJoinEID=function(ad){return V.convertLongFromServer(ad,this.innerAttributes.joinEID);};h.prototype.getJoinPath=function(){return this.innerAttributes.joinPath;};h.prototype.getJoinRealm=function(){return this.innerAttributes.joinRealm;};h.prototype.getDeadEID=function(ad){return V.convertLongFromServer(ad,this.innerAttributes.deadEID);};h.prototype.getDeadEventStore=function(){return this.innerAttributes.deadEventChannel;};h.prototype.getApplicationID=function(){return this.innerAttributes.appID;};h.prototype.getCorrelationID=function(){return this.innerAttributes.correlationID;};h.prototype.getDeliveryMode=function(){return this.innerAttributes.deliveryMode;};h.prototype.getDestination=function(){return this.innerAttributes.destination;};h.prototype.getExpiration=function(ad){return V.convertLongFromServer(ad,this.innerAttributes.expiration);};h.prototype.getMessageID=function(){return this.innerAttributes.messageID;};h.prototype.getMessageType=function(){return this.innerAttributes.messageType;};h.prototype.getPriority=function(){return this.innerAttributes.priority;};h.prototype.getRedeliveredCount=function(){return this.innerAttributes.redeliveredCount;};h.prototype.getReplyToName=function(){return this.innerAttributes.replyToName;};h.prototype.getReplyType=function(){return this.innerAttributes.replyToType;};h.prototype.getType=function(){return this.innerAttributes.type;};h.prototype.getUserID=function(){return this.innerAttributes.userID;};h.prototype.setAllowMerge=function(ad){this.innerAttributes._allowMerging=ad;return this;};h.prototype.setApplicationID=function(ad){this.innerAttributes.appID=ad;return this;};h.prototype.setCorrelationID=function(ad){this.innerAttributes.correlationID=ad;return this;};h.prototype.setDeliveryMode=function(ad){this.innerAttributes.deliveryMode=ad;return this;};h.prototype.setDestination=function(ad){this.innerAttributes.destination=ad;return this;};h.prototype.setExpiration=function(ad){this.innerAttributes.expiration=ad;return this;};h.prototype.setMessageID=function(ad){this.innerAttributes.messageID=ad;return this;};h.prototype.setMessageType=function(ad){this.innerAttributes.messageType=ad;return this;};h.prototype.setPriority=function(ad){this.innerAttributes.priority=ad;return this;};h.prototype.setReplyToName=function(ad){this.innerAttributes.replyToName=ad;return this;};h.prototype.setReplyType=function(ad){this.innerAttributes.replyToType=ad;return this;};h.prototype.setType=function(ad){this.innerAttributes.type=ad;return this;};h.prototype.setUserID=function(ad){this.innerAttributes.userID=ad;return this;};h.prototype.setSubscriberID=function(ad){this.innerAttributes.subID=ad;return this;};function L(ag,ak,ad){var am=this;var af;var aj=ak;var ah=ad;var ae;var ai=false;var al=false;this.getTxID=function(){return ag;};this.publishAndCommit=function(){if(al){throw new E(ah.getName(),ag);}var an={requestType:Z.TX_PUBLISH,transaction:am,resource:ah,event:ae};r.queueCommand(an);return af;};this.setIsCommitted=function(an){ai=an;};this.checkCommitStatus=function(an){if(ai||!an){aj.notifyListeners(t.COMMIT,af,true);}var ao={requestType:Z.TX_IS_COMMITTED,transaction:am};r.queueCommand(ao);return af;};this.setEvent=function(an){if(al){throw new E(ah.getName(),ag);}ae=an;return af;};this.on=function(ao,an){aj.on(ao,an);return af;};this.removeListener=function(ao,an){aj.removeListener(ao,an);return af;};this.notifyListeners=function(ap,ao,an){aj.notifyListeners(ap,ao,an);};af={on:this.on,removeListener:this.removeListener,checkCommitStatus:this.checkCommitStatus,publishAndCommit:this.publishAndCommit,setEvent:this.setEvent};return af;}function j(){var ad=null;var ae=function(){try{if(document.getElementById(m)===null){var ag=document.createElement("span");ag.style.display="none";ag.setAttribute("id",m);var af=document.getElementsByTagName("body")[0];af.appendChild(ag);clearInterval(ad);}}catch(ah){}};ae();if(document.getElementById(m)===null){ad=setInterval(function(){ae();},10);}}function ab(ad){return B(Z,ad)+" ["+ad+"]";}function B(ae,af){for(var ad in ae){if(ae.hasOwnProperty(ad)&&ae[ad]==af){return ad;}}}return{VERSION_NUMBER:"10.3.0.0",BUILD_NUMBER:"112089-112089",BUILD_DATE:"August 27 2018",Observe:t,BYTE_ARRAY_AS_STRING:0,BYTE_ARRAY_AS_BASE64_STRING:1,BYTE_ARRAY_AS_INT_ARRAY:2,CHANNEL_RESOURCE:1,QUEUE_RESOURCE:2,TRANSACTIONAL_QUEUE_RESOURCE:3,Driver:ac.Drivers.Names,clientSupportsDriver:ac.supportsDriver,initialize:j,createSession:Y,createEvent:S,createDictionary:q,on:M,removeListener:g,Utils:{isLoggingEnabled:V.isLoggingEnabled,Logger:V.Logger,base64Encode:V.base64Encode,base64Decode:V.base64Decode},EventDictionary:{STRING:0,LONG:1,DOUBLE:2,BOOLEAN:3,INTEGER:4,FLOAT:5,CHARACTER:6,BYTE:7,DICTIONARY:9,ARRAY:-1},LongType:{LONG_AS_NUMBER:0,LONG_AS_ARRAY:1,LONG_AS_DECIMAL_STRING:2,LONG_AS_HEXADECIMAL_STRING:3}};}());b.Nirvana=a;a.on(a.Observe.ERROR,function(e,d){a.Utils.Logger.log(8,"System Error: "+d.message,e);});if(b.addEventListener){b.addEventListener("load",a.initialize,false);}else{if(b.attachEvent){b.attachEvent("onload",a.initialize);}}}(window));